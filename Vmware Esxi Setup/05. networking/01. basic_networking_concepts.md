
# OSI Model Layers, Examples, and TCP Deep Dive

---

## 1. OSI Model Overview
The **OSI (Open Systems Interconnection)** model describes how data travels from one device to another over a network in **7 layers**.

| Layer | Name | Responsibility | Device Examples | Commands/Tools |
|-------|------|----------------|-----------------|----------------|
| **7** | Application | Interfaces with software apps to provide network services | Browser, Email client | curl, wget |
| **6** | Presentation | Data translation, encryption, compression | TLS/SSL, JPEG, MP3 codecs | openssl |
| **5** | Session | Manages sessions between apps | API session handlers | netstat |
| **4** | Transport | Reliable/unreliable delivery, segmentation, ports | TCP, UDP | netstat, ss |
| **3** | Network | Logical addressing, routing | Routers, Layer 3 switches | ping, traceroute |
| **2** | Data Link | Physical addressing, frames | Switches, NICs | arp, ip link |
| **1** | Physical | Transmits raw bits over medium | Cables, Hubs | ethtool |

---

## 2. Real-World Example – Visiting `https://www.google.com`

### **Layer 7 – Application**
- Browser forms **HTTP GET request**.
- Example: Type URL and press Enter.

### **Layer 6 – Presentation**
- HTTPS uses **TLS encryption**.
- TLS handshake ensures secure communication.

### **Layer 5 – Session**
- Maintains secure HTTPS session.
- Prevents repeated handshakes.

### **Layer 4 – Transport**
- Breaks data into **TCP segments**.
- Adds **source/destination ports** (443 for HTTPS).

### **Layer 3 – Network**
- Adds **IP addresses**.
- Router decides path.

### **Layer 2 – Data Link**
- Adds **MAC addresses** for local delivery.

### **Layer 1 – Physical**
- Converts bits into **electrical signals, light pulses, or radio waves**.

---

## 3. TCP Deep Dive – OSI Layer 4

### 3.1 Where TCP Lives in OSI Model
- **Layer:** 4 – Transport
- Role: Reliable, connection-oriented delivery.

### 3.2 Key Features
| Feature | Purpose | Analogy |
|---------|---------|---------|
| Connection-oriented | 3-way handshake | Phone call |
| Reliable delivery | Retransmits lost packets | Repeating missed words |
| Sequencing | Keeps order | Page numbers |
| Flow control | Prevents overload | Speaking slower |
| Error checking | Ensures integrity | Proofreading |

### 3.3 TCP 3-Way Handshake
1. SYN – Client says “I want to talk”.
2. SYN-ACK – Server says “I’m ready”.
3. ACK – Client says “Okay, start now”.

```
Client → SYN → Server
Client ← SYN-ACK ← Server
Client → ACK → Server
```

### 3.4 TCP Segment Structure
| Field | Purpose |
|-------|---------|
| Source Port | Sender’s port |
| Destination Port | Receiver’s port |
| Sequence Number | Order packets |
| Acknowledgment Number | Confirm receipt |
| Flags | SYN, ACK, FIN, etc. |
| Window Size | Flow control |
| Checksum | Error check |
| Urgent Pointer | Urgent data |
| Payload | App data |

### 3.5 TCP in Action – `curl https://example.com`
1. Request TCP connection to port **443**.
2. Handshake.
3. TLS handshake.
4. Data sent in segments.
5. ACKs returned.
6. Retransmissions if lost.
7. FIN-ACK to close.

### 3.6 TCP Commands
```bash
netstat -an | grep ESTABLISHED   # Check open TCP connections
nc -vz example.com 443           # Test TCP port
tcpdump -i eth0 tcp              # Capture TCP packets
ss -tulwn                        # Show TCP details
```

### 3.7 TCP in OSI Symphony
- Application says “Send this”.
- TCP segments and orders it.
- IP addresses it.
- Ethernet frames it.
- Physical sends it.

---

## 4. Summary
The OSI model layers work together like a **production line**, where each layer plays a specific role but passes the work to the next layer. TCP lives at **Layer 4** and ensures your data gets to the right place, in the right order, without errors.
